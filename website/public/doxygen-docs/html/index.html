<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HARP: HARP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HARP<span id="projectnumber">&#160;0.1.1</span>
   </div>
   <div id="projectbrief">an ara plugin for deep learning models</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HARP </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a><img src="https://github.com/TEAMuP-dev/HARP/assets/26678616/c4f5cdbb-aaff-4196-b9d2-3b6f69130856" alt="herofig_revised" class="inline"/></p>
<p>HARP is an <a href="https://www.synchroarts.com/blog/what-is-ara">ARA</a> plug-in that allows for **h**osted, **a**synchronous, **r**emote **p**rocessing with deep learning models by routing audio from a digital audio workstation (DAW) through <a href="https://www.gradio.app">Gradio</a> endpoints. Because Gradio apps can be hosted locally or in the cloud (e.g., HuggingFace Spaces), HARP lets DAW users access large state-of-the-art models with GPU compute from the cloud without breaking their within-DAW workflow.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Available Models</h1>
<p>At present, the following models are available for use within HARP:</p><ul>
<li><a href="https://huggingface.co/spaces/hugggof/pitch_shifter">hugggof/pitch_shifter</a></li>
<li><a href="https://huggingface.co/spaces/hugggof/harmonic_percussive">hugggof/harmonic_percussive</a></li>
<li><a href="https://huggingface.co/spaces/hugggof/MusicGen">hugggof/MusicGen</a></li>
<li><a href="https://huggingface.co/spaces/descript/vampnet">descript/vampnet</a></li>
<li><a href="https://huggingface.co/spaces/cwitkowitz/timbre-trap">cwitkowitz/timbre-trap</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Making a deep learning model compatible with HARP</h1>
<p>We provide a lightweight API called <a href="https://github.com/TEAMuP-dev/pyharp">pyHARP</a> for building compatible <a href="https://www.gradio.app">Gradio</a> audio-processing apps with optional interactive controls. This lets deep learning model developers create user interfaces for virtually any audio processing model with only a few lines of Python code.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
OS and DAW compatibility</h1>
<p>HARP has been tested on arm-based Mac computers running Mac OS 13.0, using the <a href="https://www.reaper.fm">REAPER</a> digital audio workstation.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Installing HARP</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
MacOS</h2>
<ul>
<li>Download the HARP DMG file from from the HARP <a href="https://github.com/TEAMuP-dev/HARP/releases">releases</a></li>
<li>Double click on the DMG file. This will open the window below <img src="https://github.com/TEAMuP-dev/HARP/assets/26678616/61acf9f3-8e00-4b85-9433-77366b262e19" alt="harp_dmg" width="397" class="inline"/></li>
<li>Double click on "Your Mac's VST3 folder"</li>
<li>Drag HARP.vst3 to the folder that was opened in the previous step</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Windows &amp; Linux</h2>
<p>The windows build is still under development. There are no current plans to support Linux</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Building the HARP plug-in from source code</h1>
<p>To build the HARP plugin from scratch, perform the following steps:</p>
<p>clone the HARP repo </p><div class="fragment"><div class="line">git clone --recurse-submodules git@github.com:TEAMuP-dev/HARP.git</div>
<div class="line">cd harp</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Mac OS</h2>
<p>Mac OS builds are known to work on apple silicon only. We've had trouble getting REAPER and ARA to work together on x86 (on apple silicon machines, to be fair). TODO: test on x86 macs.</p>
<p>Configure </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..  -DCMAKE_BUILD_TYPE=Debug </div>
</div><!-- fragment --><p>Build </p><div class="fragment"><div class="line">make -jNUM_PROCESSORS</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Building for ARM vs x86 MacOS</h3>
<p>To specify which OSX architecture you'd like to build for, set <code>CMAKE_OSX_ARCHITECTURES</code> to either <code>arm64</code> or <code>x86_64</code>:</p>
<p>(for example, for an x86_64 build) </p><div class="fragment"><div class="line">cmake .. DCMAKE_OSX_ARCHITECTURES=x86_64</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Windows</h2>
<h3><a class="anchor" id="autotoc_md11"></a>
An Important Note</h3>
<p>For now, this build works on MacOS only, since it has a custom build process that makes use of <a href="https://pyinstaller.org/en/stable/usage.html">pyinstaller</a>. <b>TODO</b>: add cmake options to build on windows.</p>
<p>Here are the commands used in VSCode (Cmake Tools extension) and Windows 10. Note that if you're using Reaper x64, you need to build the 64bit version of the plugin.</p>
<ul>
<li>Configure</li>
</ul>
<div class="fragment"><div class="line"><span class="stringliteral">&quot;C:\Program Files\CMake\bin\cmake.EXE&quot;</span> --no-warn-unused-cli -DCMAKE_EXPORT_COMPILE_COMMANDS:BOOL=TRUE -SC:/Users/xribene/Projects/TEAMuP-dev/plugin_sandbox -Bc:/Users/xribene/Projects/TEAMuP-dev/HARP/build -G <span class="stringliteral">&quot;Visual Studio 17 2022&quot;</span> -A x64</div>
</div><!-- fragment --><div class="fragment"><div class="line">cmake --no-warn-unused-cli -DCMAKE_EXPORT_COMPILE_COMMANDS:BOOL=TRUE -S . -B build -G <span class="stringliteral">&quot;Visual Studio 17 2022&quot;</span> -A x64</div>
</div><!-- fragment --> <div class="fragment"><div class="line">- Build</div>
</div><!-- fragment --><p> php "C:\Program Files\CMake\bin\cmake.EXE" &ndash;build c:/Users/xribene/Projects/TEAMuP-dev/HARP/build &ndash;config Debug &ndash;target ALL_BUILD -j 14 &ndash;</p>
<p>cmake &ndash;build build &ndash;config Debug &ndash;target ALL_BUILD -j 14</p>
<div class="fragment"><div class="line"># Codesigning and Distribution</div>
<div class="line"> </div>
<div class="line">## Mac OS</div>
<div class="line"> </div>
<div class="line">Codesigning and packaging for distribution is done through the script located at `packaging/package.sh`.</div>
<div class="line">You&#39;ll need to set up a developer account with Apple and create a certificate for signing the plugin.</div>
<div class="line">For more information on codesigning and notarization for mac, refer to the [pamplejuce](https://github.com/sudara/pamplejuce) template. </div>
<div class="line"> </div>
<div class="line">The script requires the following  variables to be passed:</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md12"></a>
Retrieve values from either environment variables or command-line arguments</h1>
<p>DEV_ID_APPLICATION # Developer ID Application certificate ARTIFACTS_PATH # should be packaging/dmg/HARP.vst3 PROJECT_NAME # "HARP" PRODUCT_NAME # "HARP" NOTARIZATION_USERNAME # Apple ID NOTARIZATION_PASSWORD # App-specific password for notarization TEAM_ID # Team ID for notarization </p><div class="fragment"><div class="line">Usage:</div>
</div><!-- fragment --><p> bash bash packaging/package.sh &lt;Developer ID Application&gt; &lt;Artifacts Path&gt; &lt;Project Name&gt; &lt;Product Name&gt; &lt;Notarization Username&gt; &lt;Notarization Password&gt; &lt;Team ID&gt; </p><div class="fragment"><div class="line">After running `package.sh`, you should have a signed and notarized dmg file in the `packaging/` directory.</div>
<div class="line"> </div>
<div class="line">## Windows</div>
<div class="line"> </div>
<div class="line">TODO</div>
<div class="line"> </div>
<div class="line"># Debugging</div>
<div class="line">### Mac</div>
<div class="line">1. download visual studio code for mac https://code.visualstudio.com/</div>
<div class="line">2. install Microsoft&#39;s C/C++ extension</div>
<div class="line">3. open the &quot;Run and Debug&quot; tab in vsc, and press &quot;create a launch.json file&quot; using the LLDB</div>
<div class="line">4. create a configuration for attaching to a process, here&#39;s an example launch.json you could use</div>
</div><!-- fragment --><p> { "version": "0.2.0", "configurations": [ { "name": "lldb reaper", "type": "cppdbg", "request": "launch", "program": "/Applications/REAPER.app/Contents/MacOS/REAPER", "args": [], "cwd": "${fileDirname}", "MIMode": "lldb", } ] } ```</p>
<ol type="1">
<li>build the plugin using this flag <code>-DCMAKE_BUILD_TYPE=Debug</code></li>
<li>run the debugger and add break poitns </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
